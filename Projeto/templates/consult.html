<!DOCTYPE html>
<html >
    <head>
        <meta charset="UTF-8">
        <title>BDs inteligentes</title>
        <link rel='stylesheet prefetch' href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css'>
        {% load staticfiles %}
        <link rel="stylesheet" href="static/css/style.css">
    </head>
    <body>
        <div class="login-card" id="content">
            
            {{ text }}
            
            <br><br>
            
            <center>
                <button onclick="goBack()">Go Back</button>
            </center>

            <script>
            function goBack() {
                window.history.back();
            }
            
            document.getElementById('content').innerHTML = prettifier('{{ text }}');
            
            function prettifier(text) {
            
                var last = 0;
                var newText = "";
                
                {% if annotations %}
                {% for resource in annotations %} 
                    
                    for (var i = last; i < text.length; i++) {
                        last = i;
                        
                        if (i == {{resource.offset}}) {
                            newText += "<a href='#' class='tooltip'> {{resource.surfaceForm}} <span>";
                            newText += "<strong>{{resource.surfaceForm}}</strong><br/>";
                            
                            {% for name, value in resource.attributeValues.items %}
                               newText += "<ins>{{ name.title }}</ins>:  <br />";
                            {% endfor %}
                            
                            newText += "</span></a>"
                            last += "{{resource.surfaceForm}}".length;
                            break;
                        }
                        
                        else newText += text[i];
                    }
                        
                {% endfor %}
                {% endif %}
                        
                return newText;
                
            }
            
            </script>
        
            
        </div>
        <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
        <script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js'></script>
        
        
    </body>
</html>
